<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Bancario - WE SEND MONEY</title>
    <link rel="icon" href="logo.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Estilos espec√≠ficos para el mapa bancario */
        .bank-map-container {
            background-color: #1a2a40;
            border-radius: 8px;
            padding: 20px;
            margin: 20px auto;
            border: 1px solid #2c3e50;
            max-width: 900px;
        }

        .country-title {
            color: #bb8a04;
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #bb8a04;
            display: flex;
            align-items: center;
        }

        .bank-account {
            background-color: #0D1a30;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #bb8a04;
            position: relative;
        }

        .bank-account h4 {
            color: #e6e8e0;
            margin-top: 0;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .bank-account p {
            margin: 5px 0;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            padding: 5px;
            border-radius: 4px;
        }

        .bank-account p:hover {
            background-color: rgba(187, 138, 4, 0.1);
        }

        .bank-account .note {
            color: #bb8a04;
            font-style: italic;
            margin-top: 10px;
        }

        .copy-icon {
            margin-left: 10px;
            color: #bb8a04;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .copy-icon:hover {
            transform: scale(1.2);
        }

        .search-container {
            margin: 20px 0;
            position: relative;
        }

        #bankSearch {
            width: 100%;
            padding: 12px 20px;
            border: 1px solid #2c3e50;
            border-radius: 25px;
            background-color: #0D1a30;
            color: #e6e8e0;
            font-size: 16px;
        }

        #bankSearch:focus {
            outline: none;
            border-color: #bb8a04;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 12px;
            color: #bb8a04;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-btn {
            background-color: #0D1a30;
            color: #e6e8e0;
            border: 1px solid #2c3e50;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background-color: #bb8a04;
            color: #0D1a30;
            border-color: #bb8a04;
        }

        .filter-btn:hover {
            border-color: #bb8a04;
        }

        .no-results {
            text-align: center;
            padding: 30px;
            color: #bb8a04;
            font-size: 1.2rem;
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .bank-account {
                padding: 10px;
            }
            
            .country-title {
                font-size: 1.3rem;
            }
            
            .filter-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="logo.svg" alt="Logo" width="70" height="70">
            <h1>esendMoney</h1>
        </div>
        <span class="menu-icon" onclick="toggleMenu()">‚ò∞</span>
    </header>

    <div id="menu" class="menu">
        <div class="menu-content">
            <a href="calculator.html">Cotizador</a>
            <a href="orders.html">√ìrdenes</a>
            <a href="bank-map.html">Mapa Bancario</a>
            <a href="profile.html">Perfil</a>
            <a onclick="logout()">Cerrar Sesi√≥n</a>
        </div>
    </div>

    <div class="container">
        <h1>Mapa Bancario</h1>
        
        <div class="search-container">
            <input type="text" id="bankSearch" placeholder="Buscar banco, titular o n√∫mero de cuenta...">
            <i class="fas fa-search search-icon"></i>
        </div>
        
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="CLP">Chile</button>
            <button class="filter-btn" data-filter="ECU">Ecuador</button>
            <button class="filter-btn" data-filter="PEN">Per√∫</button>
            <button class="filter-btn" data-filter="COP">Colombia</button>
            <button class="filter-btn" data-filter="VES">Venezuela</button>
            <button class="filter-btn" data-filter="USD">Estados Unidos</button>
            <button class="filter-btn" data-filter="EUR">Europa</button>
        </div>
        
        <div class="no-results">
            No se encontraron resultados para tu b√∫squeda.
        </div>
        
        <div class="bank-map-container" id="bankMapContainer">
            <!-- El contenido se cargar√° din√°micamente desde JavaScript -->
        </div>
    </div>

    <div class="toolbar">
        <span class="toolbar-text" onclick="window.location.href='calculator.html'">
            <i class="fas fa-dollar-sign"></i>
        </span>
        <span class="toolbar-text" onclick="window.location.href='orders.html'">
            <i class="fas fa-list-alt"></i>
        </span>
        <span class="toolbar-text" onclick="window.location.href='bank-map.html'">
            <i class="fas fa-map-marked-alt"></i>
        </span>
        <span class="toolbar-text" onclick="window.location.href='profile.html'">
            <i class="fas fa-user"></i>
        </span>
    </div>

    <script>
        // Datos del mapa bancario
        const bankData = [
            {
                country: "üá®üá± Chile",
                countryCode: "CLP",
                banks: [
                    {
                        name: "Banco Falabella",
                        accounts: [
                            {
                                titular: "Maria Fuenmayor",
                                rut: "26.540.119-8",
                                tipo: "Cuenta Corriente",
                                numero: "15840991994",
                                nota: "*Solo transferencias*"
                            }
                        ]
                    },
                    {
                        name: "Banco de Chile",
                        accounts: [
                            {
                                titular: "Maria Fuenmayor",
                                rut: "26.540.119-8",
                                tipo: "Cuenta Vista",
                                numero: "00-041-48202-87",
                                email: "cede.95@hotmail.com"
                            }
                        ]
                    },
                    {
                        name: "Banco Estado",
                        accounts: [
                            {
                                titular: "Maria Fuenmayor",
                                rut: "26.540.119-8",
                                tipo: "Corriente",
                                numero: "23500246197",
                                nota: "*Caja vecina y dep√≥sitos en efectivo*"
                            }
                        ]
                    },
                    {
                        name: "Banco Santander",
                        accounts: [
                            {
                                titular: "Cedella Fuenmayor Sanchez",
                                rut: "26.540.119-8",
                                tipo: "Corriente",
                                numero: "0 000 92 03414 3",
                                email: "Mariacedellafs@gmail.com"
                            }
                        ]
                    },
                    {
                        name: "Mercado Pago",
                        accounts: [
                            {
                                titular: "Maria Fuenmayor",
                                rut: "265401198",
                                tipo: "Cuenta Vista",
                                numero: "1054536349"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üá™üá® Ecuador",
                countryCode: "ECU",
                banks: [
                    {
                        name: "Banco Guayaquil",
                        accounts: [
                            {
                                titular: "Yosiany Meza",
                                ci: "0964855142",
                                tipo: "Ahorro",
                                numero: "0015366197"
                            }
                        ]
                    },
                    {
                        name: "Banco Pichincha",
                        accounts: [
                            {
                                titular: "Yosiany Meza",
                                ci: "0964855142",
                                tipo: "Ahorros",
                                numero: "2208217873"
                            }
                        ]
                    },
                    {
                        name: "Produbanco",
                        accounts: [
                            {
                                titular: "Yosiany Meza",
                                ci: "0964855142",
                                tipo: "Ahorros",
                                numero: "12022120659"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üáµüá™ Per√∫",
                countryCode: "PEN",
                banks: [
                    {
                        name: "BCP",
                        accounts: [
                            {
                                titular: "Fabiola Jim√©nez",
                                tipo: "Soles",
                                numero: "19496424769054",
                                interbancario: "00219419642476905494"
                            }
                        ]
                    },
                    {
                        name: "Yape",
                        accounts: [
                            {
                                titular: "Fabiola Jim√©nez",
                                telefono: "976 679 162"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üá®üá¥ Colombia",
                countryCode: "COP",
                banks: [
                    {
                        name: "Bancolombia",
                        accounts: [
                            {
                                titular: "Grisel Yovera",
                                tipo: "Ahorro",
                                numero: "91269765131"
                            }
                        ]
                    },
                    {
                        name: "Nequi",
                        accounts: [
                            {
                                titular: "Grisel Yovera",
                                telefono: "3197710793"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üáªüá™ Venezuela",
                countryCode: "VES",
                banks: [
                    {
                        name: "Banco de Venezuela",
                        accounts: [
                            {
                                titular: "Javier rizza",
                                numero: "01020311210103124139"
                            }
                        ]
                    },
                    {
                        name: "Banco Mercantil",
                        accounts: [
                            {
                                titular: "Javier rizza",
                                ci: "21404651",
                                numero: "01050062171062349741"
                            }
                        ]
                    },
                    {
                        name: "Banco Provincial",
                        accounts: [
                            {
                                titular: "Javier rizza",
                                numero: "0108 0122 2101 0009 8311"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üá∫üá∏ Estados Unidos",
                countryCode: "USD",
                banks: [
                    {
                        name: "Zelle",
                        accounts: [
                            {
                                titular: "Venecia Pacheco",
                                email: "kingriver232@gmail.com"
                            }
                        ]
                    }
                ]
            },
            {
                country: "üá™üá∫ Europa (Euro)",
                countryCode: "EUR",
                banks: [
                    {
                        name: "Revolut",
                        accounts: [
                            {
                                titular: "Javier Rizza",
                                iban: "GB78 REVO 0099 7056 9966 48",
                                swift: "REVOGB21",
                                direccion: "Revolut Ltd, 7 Westferry Circus, E14 4HD, London, United Kingdom"
                            }
                        ]
                    }
                ]
            }
        ];

        // Funci√≥n para renderizar el mapa bancario
        function renderBankMap(filter = 'all', searchTerm = '') {
            const container = document.getElementById('bankMapContainer');
            container.innerHTML = '';
            
            let hasResults = false;
            let searchRegex = new RegExp(searchTerm, 'i');
            
            bankData.forEach(country => {
                if (filter !== 'all' && country.countryCode !== filter) return;
                
                let countryHasResults = false;
                let countryHTML = `<div class="country-banks" data-country="${country.countryCode}">
                    <h3 class="country-title">${country.country}</h3>`;
                
                country.banks.forEach(bank => {
                    let bankHasResults = false;
                    let bankHTML = '';
                    
                    bank.accounts.forEach(account => {
                        // Verificar si coincide con la b√∫squeda
                        let accountText = JSON.stringify(account).toLowerCase();
                        if (searchTerm && !searchRegex.test(accountText)) return;
                        
                        hasResults = true;
                        countryHasResults = true;
                        bankHasResults = true;
                        
                        bankHTML += `<div class="bank-account">
                            <h4>${bank.name} <i class="far fa-copy copy-icon" title="Copiar todo"></i></h4>`;
                        
                        // Agregar campos din√°micamente
                        for (const [key, value] of Object.entries(account)) {
                            if (key === 'nota') continue;
                            bankHTML += `<p data-value="${value}"><strong>${key.charAt(0).toUpperCase() + key.slice(1)}:</strong> ${value} <i class="far fa-copy copy-icon" title="Copiar ${value}"></i></p>`;
                        }
                        
                        if (account.nota) {
                            bankHTML += `<p class="note">${account.nota}</p>`;
                        }
                        
                        bankHTML += `</div>`;
                    });
                    
                    if (bankHasResults) {
                        countryHTML += bankHTML;
                    }
                });
                
                countryHTML += `</div>`;
                
                if (countryHasResults) {
                    container.innerHTML += countryHTML;
                }
            });
            
            document.querySelector('.no-results').style.display = hasResults ? 'none' : 'block';
            
            // Agregar event listeners para copiar
document.querySelectorAll('.copy-icon').forEach(icon => {
    icon.addEventListener('click', function(e) {
        e.stopPropagation();
        const bankName = this.parentElement.textContent.replace(' Copiar todo', '').trim();
        
        let textToCopy = '';
        
        if (this.parentElement.tagName === 'H4') {
            // Copiar toda la informaci√≥n del banco (incluyendo el nombre)
            textToCopy = `*${bankName}*\n`;
            const accountElements = this.parentElement.parentElement.querySelectorAll('p[data-value]');
            
            accountElements.forEach(p => {
                const label = p.querySelector('strong').textContent.replace(':', '').trim();
                const value = p.getAttribute('data-value');
                textToCopy += `${label}: ${value}\n`;
            });
            
            // Agregar nota si existe
            const noteElement = this.parentElement.parentElement.querySelector('.note');
            if (noteElement) {
                textToCopy += `\n${noteElement.textContent}`;
            }
        } else {
            // Copiar solo el valor espec√≠fico
            textToCopy = this.parentElement.getAttribute('data-value');
        }
        
        navigator.clipboard.writeText(textToCopy).then(() => {
            const originalIcon = this.className;
            this.className = 'fas fa-check copy-icon';
            
            // Mostrar tooltip de confirmaci√≥n
            const tooltip = document.createElement('div');
            tooltip.textContent = '¬°Copiado!';
            tooltip.style.position = 'absolute';
            tooltip.style.backgroundColor = '#bb8a04';
            tooltip.style.color = '#0D1a30';
            tooltip.style.padding = '5px 10px';
            tooltip.style.borderRadius = '4px';
            tooltip.style.zIndex = '1000';
            tooltip.style.top = '-35px';
            tooltip.style.left = '50%';
            tooltip.style.transform = 'translateX(-50%)';
            tooltip.style.whiteSpace = 'nowrap';
            
            this.parentElement.style.position = 'relative';
            this.parentElement.appendChild(tooltip);
            
            setTimeout(() => {
                this.className = originalIcon;
                tooltip.remove();
            }, 2000);
        }).catch(err => {
            console.error('Error al copiar: ', err);
        });
    });
});

        // Inicializar el mapa bancario
        document.addEventListener('DOMContentLoaded', () => {
            renderBankMap();
            
            // Filtrado por pa√≠s
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    renderBankMap(this.dataset.filter, document.getElementById('bankSearch').value);
                });
            });
            
            // B√∫squeda
            document.getElementById('bankSearch').addEventListener('input', function() {
                const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                renderBankMap(activeFilter, this.value);
            });
        });

        // Funci√≥n para alternar el men√∫ (de scripts.js)
        function toggleMenu() {
            const menu = document.getElementById("menu");
            menu.style.display = menu.style.display === "block" ? "none" : "block";
        }

        // Cerrar men√∫ al hacer clic fuera de √©l
        document.addEventListener('click', function(event) {
            const menu = document.getElementById("menu");
            const menuIcon = document.querySelector('.menu-icon');
            
            if (menu && menuIcon) {
                if (!menu.contains(event.target) && event.target !== menuIcon) {
                    menu.style.display = 'none';
                }
            }
        });

        // Funci√≥n para cerrar sesi√≥n (de scripts.js)
        function logout() {
            localStorage.removeItem("currentUser");
            localStorage.removeItem("userRole");
            localStorage.removeItem("userCurrency");
            localStorage.removeItem("userEmail");
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("lastActivity");
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
